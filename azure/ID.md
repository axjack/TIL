認証(AuthN: authentication )
本人であることまたは本物であることを証明するプロセス。身元確認のプロセス。資格情報が利用される。

承認(AuthZ: authorization)
アクセス許可または拒否。承認は、認証された利用者に対し、何かを実行する権限を付与する行為です。

認証が先。その後に承認される。Nが先。その後Z。

Microsoft Entra ID は、クラウド内の一元化された ID プロバイダーです。

アプリケーションはどこかのテナントにグローバルに一意に存在するもの。
それに対してサービスプリンシパルはテナントごとに一意に存在する。
テナントAのアプリケーションにサービスプリンシパルP1が割り当てられ、テナントBにはサービスプリンシパルP2が割り当たるようなイメージ。

アプリケーション(EntraIDのアプリ)→サービスプリンシパルを生成。
マネージドID→サービスプリンシパルを生成。

Microsoft Entra ID は、クラウドベースの ID プロバイダーの一例です。

https://github.com/axjack/myprivate/issues/2



OpenID Connect (OIDC) が認証に使用されます。
OAuth が承認に使用され、
承認はアクセス制御とも言います
エンティティ := ユーザ|アプリ
シークレット := シークレットIDとシークレット(値)の組
証明書 := 証明書
アプリケーションオブジェクト
→複数のサービスプリンシパル、の元になるもの

認証の処理に OpenID Connect プロトコルが使用されます。
Microsoft ID プラットフォームでは、承認の処理に OAuth 2.0 プロトコルが使用されます。


アクセス←承認

Microsoft Entra テナントによって
セキュリティ保護されているリソースに
アクセスするには、
アクセスを必要とするエンティティを
セキュリティ プリンシパルで表す必要が
あります。 

この要件は、
・ユーザー (ユーザー プリンシパル) と
・アプリケーション (サービス プリンシパル) 
の両方に当てはまります。 

セキュリティ プリンシパルは、
その Microsoft Entra テナント内の
ユーザー/アプリケーションの
アクセス ポリシーとアクセス許可を
定義します。 
これにより、
サインイン時の
ユーザー/アプリケーションの認証、
リソースへのアクセス時の承認
などのコア機能を
利用できるようになります。


人間→ユーザid→ユーザプリンシパル
マネージドid→サービスプリンシパル
アプリ→サービスプリンシパル
エンプラアプリ→サービスプリンシパル
デバイス→サービスプリンシパル



Microsoft Entra では、ワークロード ID はアプリケーション、サービス プリンシパル、マネージド ID です。

「エンタープライズアプリケーション」：
既存の SaaS アプリケーション (オンプレミスの環境で提供しているアプリを含む) をテナントに統合する場合に用いる。

「アプリの登録」：ユーザーやテナントの情報にアクセスして動作するために開発したアプリケーションを公開、もしくは利用するために用いる。

「アプリの登録」からアプリを登録すると、テナントにアプリケーションが統合 (登録) された状態となりますので、「エンタープライズ アプリケーション」にもその結果としての同名のオブジェクトが表示されます。
この追加されたアプリに対して、ユーザーに割り当てを行い、アクセス許可を設定する場合には、「エンタープライズアプリケーション」の項目から設定します。

* 「エンタープライズアプリケーション」の一覧に表示されるオブジェクト : サービス プリンシパル オブジェクト
* 「アプリの登録」の一覧に表示されるオブジェクト : アプリケーション オブジェクト

セキュリティプリンシパル
・ユーザ
・グループ
・サービスプリンシパル
・マネージドID
スコープ
・管理グループ＞サブスクリプション＞リソースグループ＞リソース
